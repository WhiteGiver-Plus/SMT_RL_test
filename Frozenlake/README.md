洞数量,地图大小等等,均可以调整

1. 滑块鲁棒性测试
在测试环境中随机加入两个滑块以进行鲁棒训练(可能以1/3概率向左右滑)
Frozenlake\DQN_train.py通过is_robust参数控制是否鲁棒训练
Frozenlake\Q_table_train.py与Frozenlake\Q_table_train_robust.py生成鲁棒与非鲁棒版本
Frozenlake\slippery_mutate.py:生成三个测试用例
把75行 agent.load_q_table('q_table_dqn_normal.npy') 的文件在normal版本下运行以生成测试用例
结果:
DQN_normal
=== 优化结果 ===

测试用例 1:
滑块位置: [1, 2, 3]
成功概率: 1/4 (0.2500)

网格布局:
T: 起点, G: 终点, S: 滑块, H: 洞, .: 普通块
T S S S
. H . H
. . . H
. . . G

测试用例 2:
滑块位置: [6, 10, 14]
成功概率: 1/9 (0.1111)

网格布局:
T: 起点, G: 终点, S: 滑块, H: 洞, .: 普通块
T . . .
. H S H
. . S H
. . S G

测试用例 3:
滑块位置: [4, 6, 10]
成功概率: 1/6 (0.1667)

网格布局:
T: 起点, G: 终点, S: 滑块, H: 洞, .: 普通块
T . . .
S H S H
. . S H
. . . G

=== 优化指标 ===
平均成功概率: 0.1759
多样性分数: 0.9259
总目标值: 0.0833

将得到的测试用例输入Frozenlake\evaluate_env.py以评估鲁棒版本
DQN_robust
=== 评估结果 ===

测试用例 1:
滑块位置: [1, 2, 3]
计算得到的成功概率: 1.0000

测试用例 2:
滑块位置: [6, 10, 14]
计算得到的成功概率: 0.7500

测试用例 3:
滑块位置: [4, 6, 10]
计算得到的成功概率: 0.5000

平均成功概率: 0.7500

Q-learning robust
测试用例 1:
滑块位置: [1, 2, 3]
计算得到的成功概率: 1.0000

测试用例 2:
滑块位置: [6, 10, 14]
计算得到的成功概率: 0.8889

测试用例 3:
滑块位置: [4, 6, 10]
计算得到的成功概率: 0.5000

平均成功概率: 0.7963


2. 权重变异测试
用q_mutate.py生成变异体(已经生成)
运行Frozenlake\optimize_slippery_mutants.py
更改228,229行参数控制是否对鲁棒版本进行生成

非鲁棒版本:
2024-12-11 20:25:56,027 - INFO - 加载了 50 个变异体
2024-12-11 20:26:24,062 - INFO - 
=== 优化结果 ===
2024-12-11 20:26:24,063 - INFO - 最优滑块位置: [4, 8, 9]
2024-12-11 20:26:24,063 - INFO - 原始模型成功概率: 1.0000
2024-12-11 20:26:24,063 - INFO - 变异体平均成功概率: 0.4307
2024-12-11 20:26:24,063 - INFO - 性能差异: 0.5693
2024-12-11 20:26:24,063 - INFO -
网格布局:
2024-12-11 20:26:24,063 - INFO - T: 起点, G: 终点, S: 滑块, H: 洞, .: 普通块
2024-12-11 20:26:24,063 - INFO - T . . .
2024-12-11 20:26:24,063 - INFO - S H . H
2024-12-11 20:26:24,063 - INFO - S S . H
2024-12-11 20:26:24,063 - INFO - . . . G

优化完成！
最优滑块位置: [4, 8, 9]
性能差异: 0.5693

鲁棒版本:
2024-12-11 20:31:18,759 - INFO - 加载了 50 个变异体
2024-12-11 20:32:02,191 - INFO - 
=== 优化结果 ===
2024-12-11 20:32:02,191 - INFO - 最优滑块位置: [8, 9, 13]
2024-12-11 20:32:02,191 - INFO - 原始模型成功概率: 1.0000
2024-12-11 20:32:02,191 - INFO - 变异体平均成功概率: 0.2333
2024-12-11 20:32:02,191 - INFO - 性能差异: 0.7667
2024-12-11 20:32:02,191 - INFO -
网格布局:
2024-12-11 20:32:02,191 - INFO - T: 起点, G: 终点, S: 滑块, H: 洞, .: 普通块
2024-12-11 20:32:02,191 - INFO - T . . .
2024-12-11 20:32:02,191 - INFO - . H . H
2024-12-11 20:32:02,198 - INFO - S S . H
2024-12-11 20:32:02,198 - INFO - . S . G

优化完成！
最优滑块位置: [8, 9, 13]
性能差异: 0.7667